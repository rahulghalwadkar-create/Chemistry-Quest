<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chemistry Quest - ICSE Class 10</title>
    <style>
        :root {
            --color-primary: #9C27B0;
            --color-success: #4CAF50;
            --color-danger: #f44336;
            --color-warning: #FF9800;
            --color-bg: #f5f5f5;
            --color-card: #ffffff;
            --color-text: #333;
            --color-border: #ddd;
            --color-secondary: #00BCD4;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
        }

        .header {
            background: var(--color-card);
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 8px 20px rgba(0,0,0,0.2);
            text-align: center;
            margin-bottom: 30px;
        }

        .header h1 {
            color: var(--color-primary);
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .header p {
            color: #666;
            font-size: 1.1em;
        }

        .stats-bar {
            display: flex;
            gap: 15px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .stat-card {
            flex: 1;
            min-width: 150px;
            background: var(--color-card);
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            text-align: center;
        }

        .stat-card h3 {
            font-size: 0.9em;
            color: #666;
            margin-bottom: 8px;
            text-transform: uppercase;
        }

        .stat-card .value {
            font-size: 1.8em;
            font-weight: bold;
            color: var(--color-primary);
        }

        .game-container {
            background: var(--color-card);
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 8px 20px rgba(0,0,0,0.2);
            min-height: 400px;
        }

        .menu-screen, .level-screen, .quiz-screen, .result-screen {
            display: none;
        }

        .menu-screen.active, .level-screen.active, .quiz-screen.active, .result-screen.active {
            display: block;
        }

        .level-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .level-card {
            background: linear-gradient(135deg, #9C27B0 0%, #673AB7 100%);
            color: white;
            padding: 25px;
            border-radius: 12px;
            cursor: pointer;
            transition: transform 0.3s, box-shadow 0.3s;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .level-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.3);
        }

        .level-card.locked {
            background: linear-gradient(135deg, #bbb 0%, #999 100%);
            cursor: not-allowed;
            opacity: 0.6;
        }

        .level-card h3 {
            font-size: 1.5em;
            margin-bottom: 10px;
        }

        .level-card p {
            font-size: 0.95em;
            opacity: 0.9;
        }

        .level-card .stars {
            margin-top: 15px;
            font-size: 1.5em;
        }

        .question-container {
            margin-bottom: 30px;
        }

        .question-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--color-border);
        }

        .question-number {
            font-size: 1.2em;
            color: var(--color-primary);
            font-weight: bold;
        }

        .timer {
            font-size: 1.2em;
            color: var(--color-danger);
            font-weight: bold;
        }

        .question-text {
            font-size: 1.3em;
            color: var(--color-text);
            margin-bottom: 25px;
            line-height: 1.6;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .option {
            background: #f8f9fa;
            border: 2px solid var(--color-border);
            padding: 15px 20px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 1.1em;
        }

        .option:hover {
            background: #e9ecef;
            border-color: var(--color-primary);
            transform: translateX(5px);
        }

        .option.selected {
            background: var(--color-primary);
            color: white;
            border-color: var(--color-primary);
        }

        .option.correct {
            background: var(--color-success);
            color: white;
            border-color: var(--color-success);
        }

        .option.incorrect {
            background: var(--color-danger);
            color: white;
            border-color: var(--color-danger);
        }

        .option.disabled {
            cursor: not-allowed;
            opacity: 0.7;
        }

        .btn {
            padding: 12px 30px;
            font-size: 1.1em;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 600;
        }

        .btn-primary {
            background: var(--color-primary);
            color: white;
        }

        .btn-primary:hover {
            background: #7B1FA2;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(156, 39, 176, 0.4);
        }

        .btn-success {
            background: var(--color-success);
            color: white;
        }

        .btn-success:hover {
            background: #45a049;
        }

        .btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }

        .button-group {
            display: flex;
            gap: 15px;
            margin-top: 25px;
            flex-wrap: wrap;
        }

        .feedback {
            margin-top: 20px;
            padding: 15px;
            border-radius: 8px;
            font-size: 1.05em;
        }

        .feedback.correct {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .feedback.incorrect {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .result-summary {
            text-align: center;
            padding: 30px;
        }

        .result-summary h2 {
            font-size: 2.5em;
            margin-bottom: 20px;
            color: var(--color-primary);
        }

        .result-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .result-stat {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .result-stat h3 {
            color: #666;
            font-size: 0.95em;
            margin-bottom: 10px;
        }

        .result-stat .value {
            font-size: 2em;
            font-weight: bold;
            color: var(--color-primary);
        }

        .badge {
            display: inline-block;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: bold;
            margin: 10px 5px;
            font-size: 0.9em;
        }

        .badge-gold {
            background: #FFD700;
            color: #333;
        }

        .badge-silver {
            background: #C0C0C0;
            color: #333;
        }

        .badge-bronze {
            background: #CD7F32;
            color: white;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e0e0e0;
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 20px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--color-primary), var(--color-success));
            transition: width 0.3s ease;
        }

        .formula-box {
            background: #f0f0f0;
            padding: 10px;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            margin: 10px 0;
            text-align: center;
            border-left: 4px solid var(--color-primary);
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 1.8em;
            }

            .stats-bar {
                flex-direction: column;
            }

            .level-grid {
                grid-template-columns: 1fr;
            }

            .question-text {
                font-size: 1.1em;
            }

            .option {
                font-size: 1em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>‚öóÔ∏è Chemistry Quest</h1>
            <p>ICSE Class 10 Chemistry - Master Mole Concept &amp; Stoichiometry!</p>
        </div>

        <div class="stats-bar">
            <div class="stat-card">
                <h3>Total Score</h3>
                <div class="value" id="totalScore">0</div>
            </div>
            <div class="stat-card">
                <h3>Levels Completed</h3>
                <div class="value" id="levelsCompleted">0/6</div>
            </div>
            <div class="stat-card">
                <h3>Accuracy</h3>
                <div class="value" id="accuracy">0%</div>
            </div>
            <div class="stat-card">
                <h3>Badges Earned</h3>
                <div class="value" id="badges">0</div>
            </div>
        </div>

        <div class="game-container">
            <!-- Menu Screen -->
            <div class="menu-screen active" id="menuScreen">
                <h2 style="text-align: center; margin-bottom: 30px; color: var(--color-primary); font-size: 2em;">Select Your Chemical Challenge</h2>
                <div class="level-grid" id="levelGrid"></div>
            </div>

            <!-- Quiz Screen -->
            <div class="quiz-screen" id="quizScreen">
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                <div class="question-container">
                    <div class="question-header">
                        <span class="question-number" id="questionNumber">Question 1 of 5</span>
                        <span class="timer" id="timer">‚è±Ô∏è 40s</span>
                    </div>
                    <div class="question-text" id="questionText"></div>
                    <div class="options" id="optionsContainer"></div>
                    <div class="feedback" id="feedback" style="display: none;"></div>
                </div>
                <div class="button-group">
                    <button class="btn btn-primary" id="nextBtn" style="display: none;">Next Question</button>
                    <button class="btn btn-success" id="finishBtn" style="display: none;">View Results</button>
                </div>
            </div>

            <!-- Result Screen -->
            <div class="result-screen" id="resultScreen">
                <div class="result-summary">
                    <h2 id="resultTitle">üéâ Challenge Complete!</h2>
                    <div class="result-stats">
                        <div class="result-stat">
                            <h3>Score</h3>
                            <div class="value" id="resultScore">0</div>
                        </div>
                        <div class="result-stat">
                            <h3>Correct Answers</h3>
                            <div class="value" id="resultCorrect">0/5</div>
                        </div>
                        <div class="result-stat">
                            <h3>Time Taken</h3>
                            <div class="value" id="resultTime">0s</div>
                        </div>
                        <div class="result-stat">
                            <h3>Accuracy</h3>
                            <div class="value" id="resultAccuracy">0%</div>
                        </div>
                    </div>
                    <div id="badgeContainer"></div>
                    <div class="button-group" style="justify-content: center;">
                        <button class="btn btn-primary" id="retryBtn">Retry Challenge</button>
                        <button class="btn btn-success" id="menuBtn">Back to Menu</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const gameData = {
            levels: [
                {
                    id: 1,
                    title: "Mole Concept Basics",
                    description: "Understanding moles, Avogadro's number, and atomic mass",
                    locked: false,
                    stars: 0,
                    questions: [
                        {
                            question: "What is a mole in chemistry?",
                            options: [
                                "A unit of mass",
                                "A unit for counting particles (6.022√ó10¬≤¬≥ particles)",
                                "A type of chemical bond",
                                "A measurement of volume"
                            ],
                            correct: 1,
                            explanation: "A mole is the SI unit for the amount of substance, containing exactly 6.022√ó10¬≤¬≥ particles (Avogadro's number)."
                        },
                        {
                            question: "Avogadro's number (N‚Çê) is equal to:",
                            options: [
                                "6.022√ó10¬≤¬π",
                                "6.022√ó10¬≤¬≥",
                                "6.022√ó10¬≤‚Å¥",
                                "1.602√ó10‚Åª¬π‚Åπ"
                            ],
                            correct: 1,
                            explanation: "Avogadro's number is 6.022√ó10¬≤¬≥, representing the number of particles in one mole of any substance."
                        },
                        {
                            question: "The molar mass of carbon (C = 12) is:",
                            options: [
                                "6 g/mol",
                                "12 g/mol",
                                "24 g/mol",
                                "12 g"
                            ],
                            correct: 1,
                            explanation: "The molar mass of carbon is 12 g/mol, meaning one mole of carbon atoms weighs 12 grams."
                        },
                        {
                            question: "How many moles are present in 18g of water (H‚ÇÇO)? [H=1, O=16]",
                            options: [
                                "0.5 moles",
                                "1 mole",
                                "2 moles",
                                "18 moles"
                            ],
                            correct: 1,
                            explanation: "Molar mass of H‚ÇÇO = 2(1) + 16 = 18 g/mol. Number of moles = mass/molar mass = 18/18 = 1 mole."
                        },
                        {
                            question: "What is the relationship between moles, mass, and molar mass?",
                            options: [
                                "Moles = Mass + Molar mass",
                                "Moles = Mass / Molar mass",
                                "Moles = Mass √ó Molar mass",
                                "Moles = Molar mass / Mass"
                            ],
                            correct: 1,
                            explanation: "The fundamental formula: Number of moles (n) = Given mass (m) / Molar mass (M)"
                        }
                    ]
                },
                {
                    id: 2,
                    title: "Molar Mass Calculations",
                    description: "Calculate molar masses of compounds",
                    locked: true,
                    stars: 0,
                    questions: [
                        {
                            question: "What is the molar mass of calcium carbonate (CaCO‚ÇÉ)? [Ca=40, C=12, O=16]",
                            options: [
                                "68 g/mol",
                                "84 g/mol",
                                "100 g/mol",
                                "112 g/mol"
                            ],
                            correct: 2,
                            explanation: "Molar mass = 40 + 12 + 3(16) = 40 + 12 + 48 = 100 g/mol"
                        },
                        {
                            question: "Calculate the molar mass of sulfuric acid (H‚ÇÇSO‚ÇÑ). [H=1, S=32, O=16]",
                            options: [
                                "49 g/mol",
                                "82 g/mol",
                                "98 g/mol",
                                "104 g/mol"
                            ],
                            correct: 2,
                            explanation: "Molar mass = 2(1) + 32 + 4(16) = 2 + 32 + 64 = 98 g/mol"
                        },
                        {
                            question: "How many grams are there in 0.5 moles of sodium chloride (NaCl)? [Na=23, Cl=35.5]",
                            options: [
                                "29.25 g",
                                "58.5 g",
                                "117 g",
                                "23 g"
                            ],
                            correct: 0,
                            explanation: "Molar mass of NaCl = 23 + 35.5 = 58.5 g/mol. Mass = moles √ó molar mass = 0.5 √ó 58.5 = 29.25 g"
                        },
                        {
                            question: "What is the molar mass of glucose (C‚ÇÜH‚ÇÅ‚ÇÇO‚ÇÜ)? [C=12, H=1, O=16]",
                            options: [
                                "168 g/mol",
                                "180 g/mol",
                                "192 g/mol",
                                "200 g/mol"
                            ],
                            correct: 1,
                            explanation: "Molar mass = 6(12) + 12(1) + 6(16) = 72 + 12 + 96 = 180 g/mol"
                        },
                        {
                            question: "How many moles are in 49g of H‚ÇÇSO‚ÇÑ? [Molar mass = 98 g/mol]",
                            options: [
                                "0.25 moles",
                                "0.5 moles",
                                "1 mole",
                                "2 moles"
                            ],
                            correct: 1,
                            explanation: "Number of moles = mass/molar mass = 49/98 = 0.5 moles"
                        }
                    ]
                },
                {
                    id: 3,
                    title: "Percentage Composition",
                    description: "Calculate percentage composition of elements in compounds",
                    locked: true,
                    stars: 0,
                    questions: [
                        {
                            question: "What is the percentage of carbon in carbon dioxide (CO‚ÇÇ)? [C=12, O=16]",
                            options: [
                                "27.3%",
                                "37.5%",
                                "50%",
                                "72.7%"
                            ],
                            correct: 0,
                            explanation: "Molar mass of CO‚ÇÇ = 12 + 2(16) = 44 g/mol. % of C = (12/44) √ó 100 = 27.3%"
                        },
                        {
                            question: "Calculate the percentage of oxygen in water (H‚ÇÇO). [H=1, O=16]",
                            options: [
                                "11.1%",
                                "50%",
                                "88.9%",
                                "100%"
                            ],
                            correct: 2,
                            explanation: "Molar mass of H‚ÇÇO = 2(1) + 16 = 18 g/mol. % of O = (16/18) √ó 100 = 88.9%"
                        },
                        {
                            question: "What is the percentage of nitrogen in ammonia (NH‚ÇÉ)? [N=14, H=1]",
                            options: [
                                "17.6%",
                                "50%",
                                "82.4%",
                                "87.5%"
                            ],
                            correct: 2,
                            explanation: "Molar mass of NH‚ÇÉ = 14 + 3(1) = 17 g/mol. % of N = (14/17) √ó 100 = 82.4%"
                        },
                        {
                            question: "In calcium carbonate (CaCO‚ÇÉ), what is the percentage of calcium? [Ca=40, C=12, O=16]",
                            options: [
                                "12%",
                                "40%",
                                "48%",
                                "60%"
                            ],
                            correct: 1,
                            explanation: "Molar mass of CaCO‚ÇÉ = 100 g/mol. % of Ca = (40/100) √ó 100 = 40%"
                        },
                        {
                            question: "A compound contains 40% carbon, 6.7% hydrogen, and 53.3% oxygen. What is the compound?",
                            options: [
                                "Methane (CH‚ÇÑ)",
                                "Ethanol (C‚ÇÇH‚ÇÖOH)",
                                "Glucose (C‚ÇÜH‚ÇÅ‚ÇÇO‚ÇÜ)",
                                "Acetic acid (CH‚ÇÉCOOH)"
                            ],
                            correct: 2,
                            explanation: "These percentages match glucose (C‚ÇÜH‚ÇÅ‚ÇÇO‚ÇÜ): C = 72/180 = 40%, H = 12/180 = 6.7%, O = 96/180 = 53.3%"
                        }
                    ]
                },
                {
                    id: 4,
                    title: "Empirical & Molecular Formulas",
                    description: "Determine chemical formulas from composition data",
                    locked: true,
                    stars: 0,
                    questions: [
                        {
                            question: "What is an empirical formula?",
                            options: [
                                "The actual molecular formula",
                                "The simplest whole number ratio of atoms",
                                "The formula with maximum atoms",
                                "The formula showing only metals"
                            ],
                            correct: 1,
                            explanation: "The empirical formula shows the simplest whole number ratio of atoms in a compound."
                        },
                        {
                            question: "A compound contains 2g hydrogen and 16g oxygen. What is its empirical formula? [H=1, O=16]",
                            options: [
                                "HO",
                                "H‚ÇÇO",
                                "H‚ÇÇO‚ÇÇ",
                                "HO‚ÇÇ"
                            ],
                            correct: 1,
                            explanation: "Moles of H = 2/1 = 2, Moles of O = 16/16 = 1. Ratio H:O = 2:1, so formula is H‚ÇÇO"
                        },
                        {
                            question: "The empirical formula of a compound is CH‚ÇÇO and its molecular mass is 180. What is its molecular formula? [C=12, H=1, O=16]",
                            options: [
                                "C‚ÇÉH‚ÇÜO‚ÇÉ",
                                "C‚ÇÜH‚ÇÅ‚ÇÇO‚ÇÜ",
                                "C‚ÇâH‚ÇÅ‚ÇàO‚Çâ",
                                "C‚ÇÅ‚ÇÇH‚ÇÇ‚ÇÑO‚ÇÅ‚ÇÇ"
                            ],
                            correct: 1,
                            explanation: "Empirical formula mass = 12+2+16 = 30. n = 180/30 = 6. Molecular formula = (CH‚ÇÇO)‚ÇÜ = C‚ÇÜH‚ÇÅ‚ÇÇO‚ÇÜ"
                        },
                        {
                            question: "A hydrocarbon contains 80% carbon and 20% hydrogen. Its empirical formula is: [C=12, H=1]",
                            options: [
                                "CH",
                                "CH‚ÇÇ",
                                "CH‚ÇÉ",
                                "CH‚ÇÑ"
                            ],
                            correct: 2,
                            explanation: "Moles: C = 80/12 = 6.67, H = 20/1 = 20. Simplest ratio: C:H = 1:3, so empirical formula is CH‚ÇÉ"
                        },
                        {
                            question: "If the empirical formula is CH and molecular mass is 78, the molecular formula is: [C=12, H=1]",
                            options: [
                                "C‚ÇÇH‚ÇÇ",
                                "C‚ÇÑH‚ÇÑ",
                                "C‚ÇÜH‚ÇÜ",
                                "C‚ÇàH‚Çà"
                            ],
                            correct: 2,
                            explanation: "Empirical formula mass = 12+1 = 13. n = 78/13 = 6. Molecular formula = (CH)‚ÇÜ = C‚ÇÜH‚ÇÜ"
                        }
                    ]
                },
                {
                    id: 5,
                    title: "Chemical Equations & Balancing",
                    description: "Balance equations and understand stoichiometry basics",
                    locked: true,
                    stars: 0,
                    questions: [
                        {
                            question: "What does a balanced chemical equation satisfy?",
                            options: [
                                "Law of conservation of energy",
                                "Law of conservation of mass",
                                "Law of definite proportions",
                                "Law of multiple proportions"
                            ],
                            correct: 1,
                            explanation: "A balanced equation satisfies the law of conservation of mass - atoms are neither created nor destroyed."
                        },
                        {
                            question: "Balance this equation: H‚ÇÇ + O‚ÇÇ ‚Üí H‚ÇÇO. The coefficients are:",
                            options: [
                                "1, 1, 1",
                                "2, 1, 2",
                                "2, 2, 2",
                                "1, 2, 2"
                            ],
                            correct: 1,
                            explanation: "2H‚ÇÇ + O‚ÇÇ ‚Üí 2H‚ÇÇO. This gives 4H and 2O on both sides."
                        },
                        {
                            question: "In the reaction: N‚ÇÇ + 3H‚ÇÇ ‚Üí 2NH‚ÇÉ, what is the molar ratio of N‚ÇÇ to NH‚ÇÉ?",
                            options: [
                                "1:1",
                                "1:2",
                                "1:3",
                                "2:3"
                            ],
                            correct: 1,
                            explanation: "From the coefficients, 1 mole of N‚ÇÇ produces 2 moles of NH‚ÇÉ, so ratio is 1:2."
                        },
                        {
                            question: "Balance: Fe + O‚ÇÇ ‚Üí Fe‚ÇÇO‚ÇÉ. The coefficients are:",
                            options: [
                                "2, 3, 2",
                                "4, 3, 2",
                                "3, 2, 2",
                                "2, 2, 1"
                            ],
                            correct: 1,
                            explanation: "4Fe + 3O‚ÇÇ ‚Üí 2Fe‚ÇÇO‚ÇÉ. This gives 4Fe and 6O atoms on both sides."
                        },
                        {
                            question: "What information does a balanced equation NOT provide directly?",
                            options: [
                                "Molar ratios of reactants and products",
                                "States of matter of substances",
                                "Rate of the reaction",
                                "Stoichiometric relationships"
                            ],
                            correct: 2,
                            explanation: "A balanced equation shows what reacts and products formed, but NOT how fast the reaction occurs (reaction rate)."
                        }
                    ]
                },
                {
                    id: 6,
                    title: "Stoichiometric Calculations",
                    description: "Master calculations involving chemical reactions",
                    locked: true,
                    stars: 0,
                    questions: [
                        {
                            question: "For 2H‚ÇÇ + O‚ÇÇ ‚Üí 2H‚ÇÇO, how many moles of water form from 4 moles of H‚ÇÇ?",
                            options: [
                                "2 moles",
                                "4 moles",
                                "6 moles",
                                "8 moles"
                            ],
                            correct: 1,
                            explanation: "From equation: 2 moles H‚ÇÇ ‚Üí 2 moles H‚ÇÇO. So 4 moles H‚ÇÇ ‚Üí 4 moles H‚ÇÇO (1:1 ratio)"
                        },
                        {
                            question: "CaCO‚ÇÉ ‚Üí CaO + CO‚ÇÇ. How many grams of CO‚ÇÇ form from 100g CaCO‚ÇÉ? [Ca=40, C=12, O=16]",
                            options: [
                                "22 g",
                                "44 g",
                                "56 g",
                                "88 g"
                            ],
                            correct: 1,
                            explanation: "Molar mass: CaCO‚ÇÉ=100, CO‚ÇÇ=44. Moles of CaCO‚ÇÉ=100/100=1. From 1:1 ratio, CO‚ÇÇ=1 mole=44g"
                        },
                        {
                            question: "N‚ÇÇ + 3H‚ÇÇ ‚Üí 2NH‚ÇÉ. How many moles of H‚ÇÇ needed to produce 10 moles of NH‚ÇÉ?",
                            options: [
                                "5 moles",
                                "10 moles",
                                "15 moles",
                                "20 moles"
                            ],
                            correct: 2,
                            explanation: "From equation: 3 moles H‚ÇÇ ‚Üí 2 moles NH‚ÇÉ. For 10 moles NH‚ÇÉ: (3/2) √ó 10 = 15 moles H‚ÇÇ"
                        },
                        {
                            question: "2Na + Cl‚ÇÇ ‚Üí 2NaCl. How many grams of NaCl form from 46g Na? [Na=23, Cl=35.5]",
                            options: [
                                "58.5 g",
                                "117 g",
                                "146.5 g",
                                "234 g"
                            ],
                            correct: 1,
                            explanation: "Moles of Na = 46/23 = 2. From 2:2 ratio, 2 moles NaCl form. Mass = 2 √ó 58.5 = 117g"
                        },
                        {
                            question: "CH‚ÇÑ + 2O‚ÇÇ ‚Üí CO‚ÇÇ + 2H‚ÇÇO. What is the limiting reactant if 1 mole CH‚ÇÑ reacts with 1 mole O‚ÇÇ?",
                            options: [
                                "CH‚ÇÑ",
                                "O‚ÇÇ",
                                "Both are equal",
                                "Neither"
                            ],
                            correct: 1,
                            explanation: "1 mole CH‚ÇÑ needs 2 moles O‚ÇÇ. With only 1 mole O‚ÇÇ available, O‚ÇÇ is the limiting reactant."
                        }
                    ]
                }
            ]
        };

        let currentLevel = null;
        let currentQuestionIndex = 0;
        let score = 0;
        let correctAnswers = 0;
        let timeRemaining = 40;
        let timerInterval = null;
        let totalAttempts = 0;
        let totalCorrect = 0;
        let startTime = 0;

        // Initialize game
        function initGame() {
            loadProgress();
            renderLevelGrid();
            updateStats();
        }

        function renderLevelGrid() {
            const levelGrid = document.getElementById('levelGrid');
            levelGrid.innerHTML = '';

            gameData.levels.forEach(level => {
                const levelCard = document.createElement('div');
                levelCard.className = `level-card ${level.locked ? 'locked' : ''}`;
                levelCard.innerHTML = `
                    <h3>${level.title}</h3>
                    <p>${level.description}</p>
                    <div class="stars">${'‚≠ê'.repeat(level.stars)}${'‚òÜ'.repeat(3 - level.stars)}</div>
                `;
                if (!level.locked) {
                    levelCard.onclick = () => startLevel(level.id);
                }
                levelGrid.appendChild(levelCard);
            });
        }

        function startLevel(levelId) {
            currentLevel = gameData.levels.find(l => l.id === levelId);
            currentQuestionIndex = 0;
            score = 0;
            correctAnswers = 0;
            startTime = Date.now();

            document.getElementById('menuScreen').classList.remove('active');
            document.getElementById('quizScreen').classList.add('active');
            
            showQuestion();
        }

        function showQuestion() {
            if (currentQuestionIndex >= currentLevel.questions.length) {
                showResults();
                return;
            }

            const question = currentLevel.questions[currentQuestionIndex];
            document.getElementById('questionNumber').textContent = 
                `Question ${currentQuestionIndex + 1} of ${currentLevel.questions.length}`;
            document.getElementById('questionText').textContent = question.question;
            
            const progress = ((currentQuestionIndex) / currentLevel.questions.length) * 100;
            document.getElementById('progressFill').style.width = progress + '%';

            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';

            question.options.forEach((option, index) => {
                const optionDiv = document.createElement('div');
                optionDiv.className = 'option';
                optionDiv.textContent = option;
                optionDiv.onclick = () => selectAnswer(index);
                optionsContainer.appendChild(optionDiv);
            });

            document.getElementById('feedback').style.display = 'none';
            document.getElementById('nextBtn').style.display = 'none';
            document.getElementById('finishBtn').style.display = 'none';

            timeRemaining = 40;
            startTimer();
        }

        function startTimer() {
            clearInterval(timerInterval);
            timerInterval = setInterval(() => {
                timeRemaining--;
                document.getElementById('timer').textContent = `‚è±Ô∏è ${timeRemaining}s`;
                
                if (timeRemaining <= 0) {
                    clearInterval(timerInterval);
                    selectAnswer(-1);
                }
            }, 1000);
        }

        function selectAnswer(selectedIndex) {
            clearInterval(timerInterval);
            
            const question = currentLevel.questions[currentQuestionIndex];
            const options = document.querySelectorAll('.option');
            
            options.forEach((option, index) => {
                option.classList.add('disabled');
                if (index === question.correct) {
                    option.classList.add('correct');
                }
                if (index === selectedIndex && index !== question.correct) {
                    option.classList.add('incorrect');
                }
            });

            const feedback = document.getElementById('feedback');
            feedback.style.display = 'block';
            
            totalAttempts++;
            if (selectedIndex === question.correct) {
                correctAnswers++;
                totalCorrect++;
                const timeBonus = Math.floor(timeRemaining * 2);
                score += 100 + timeBonus;
                feedback.className = 'feedback correct';
                feedback.innerHTML = `
                    <strong>‚úÖ Correct!</strong><br>
                    ${question.explanation}<br>
                    <em>+${100 + timeBonus} points (${timeBonus} time bonus)</em>
                `;
            } else {
                feedback.className = 'feedback incorrect';
                feedback.innerHTML = `
                    <strong>‚ùå Incorrect</strong><br>
                    ${question.explanation}
                `;
            }

            if (currentQuestionIndex < currentLevel.questions.length - 1) {
                document.getElementById('nextBtn').style.display = 'inline-block';
            } else {
                document.getElementById('finishBtn').style.display = 'inline-block';
            }
        }

        document.getElementById('nextBtn').onclick = () => {
            currentQuestionIndex++;
            showQuestion();
        };

        document.getElementById('finishBtn').onclick = () => {
            showResults();
        };

        function showResults() {
            clearInterval(timerInterval);
            
            const timeTaken = Math.floor((Date.now() - startTime) / 1000);
            const accuracy = Math.round((correctAnswers / currentLevel.questions.length) * 100);
            
            if (accuracy >= 80) currentLevel.stars = 3;
            else if (accuracy >= 60) currentLevel.stars = 2;
            else if (accuracy >= 40) currentLevel.stars = 1;
            
            if (currentLevel.id < gameData.levels.length && currentLevel.stars > 0) {
                gameData.levels[currentLevel.id].locked = false;
            }

            document.getElementById('quizScreen').classList.remove('active');
            document.getElementById('resultScreen').classList.add('active');

            document.getElementById('resultTitle').textContent = 
                accuracy >= 80 ? 'üéâ Outstanding Chemist!' : 
                accuracy >= 60 ? 'üëç Great Work!' : 
                accuracy >= 40 ? 'üí™ Keep Studying!' : 
                'üìö Review and Try Again!';

            document.getElementById('resultScore').textContent = score;
            document.getElementById('resultCorrect').textContent = 
                `${correctAnswers}/${currentLevel.questions.length}`;
            document.getElementById('resultTime').textContent = `${timeTaken}s`;
            document.getElementById('resultAccuracy').textContent = `${accuracy}%`;

            const badgeContainer = document.getElementById('badgeContainer');
            badgeContainer.innerHTML = '';
            
            if (currentLevel.stars === 3) {
                badgeContainer.innerHTML += '<span class="badge badge-gold">üèÜ Chemistry Master</span>';
            } else if (currentLevel.stars === 2) {
                badgeContainer.innerHTML += '<span class="badge badge-silver">ü•à Excellent</span>';
            } else if (currentLevel.stars === 1) {
                badgeContainer.innerHTML += '<span class="badge badge-bronze">ü•â Good Start</span>';
            }

            if (timeTaken < 100) {
                badgeContainer.innerHTML += '<span class="badge badge-gold">‚ö° Speed Calculator</span>';
            }

            saveProgress();
            updateStats();
        }

        document.getElementById('retryBtn').onclick = () => {
            document.getElementById('resultScreen').classList.remove('active');
            startLevel(currentLevel.id);
        };

        document.getElementById('menuBtn').onclick = () => {
            document.getElementById('resultScreen').classList.remove('active');
            document.getElementById('menuScreen').classList.add('active');
            renderLevelGrid();
        };

        function updateStats() {
            const levelsCompleted = gameData.levels.filter(l => l.stars > 0).length;
            const totalStars = gameData.levels.reduce((sum, l) => sum + l.stars, 0);
            const accuracy = totalAttempts > 0 ? Math.round((totalCorrect / totalAttempts) * 100) : 0;

            document.getElementById('totalScore').textContent = totalStars * 100;
            document.getElementById('levelsCompleted').textContent = `${levelsCompleted}/6`;
            document.getElementById('accuracy').textContent = `${accuracy}%`;
            document.getElementById('badges').textContent = 
                gameData.levels.filter(l => l.stars === 3).length;
        }

        function saveProgress() {
            const progress = {
                levels: gameData.levels.map(l => ({
                    id: l.id,
                    locked: l.locked,
                    stars: l.stars
                })),
                totalAttempts,
                totalCorrect
            };
            localStorage.setItem('chemistryQuestProgress', JSON.stringify(progress));
        }

        function loadProgress() {
            const saved = localStorage.getItem('chemistryQuestProgress');
            if (saved) {
                const progress = JSON.parse(saved);
                progress.levels.forEach(saved => {
                    const level = gameData.levels.find(l => l.id === saved.id);
                    if (level) {
                        level.locked = saved.locked;
                        level.stars = saved.stars;
                    }
                });
                totalAttempts = progress.totalAttempts || 0;
                totalCorrect = progress.totalCorrect || 0;
            }
        }

        initGame();
    </script>
</body>
</html>
